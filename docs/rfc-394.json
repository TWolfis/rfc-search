{
  "series": "Request for Comments",
  "number": "394",
  "howpublished": "RFC 394",
  "publisher": "RFC Editor",
  "doi": "10.17487/RFC0394",
  "url": "https://www.rfc-editor.org/info/rfc394",
  "title": "Two Proposed Changes to the IMP-Host Protocol",
  "pagetotal": "3",
  "year": "1972",
  "month": "sep",
  "body": "\n\n\n\n\n\nNetwork Working Group                    John M. McQuillan\nRequest for Comments #394                Bolt Beranek and Newman Inc.\nNIC 11856                                27 September 1972\nCategories:  B.1\nUpdates:  RFC #381\nObsoletes:\n\n             TWO PROPOSED CHANGES TO THE IMP-HOST PROTOCOL\n---------------------------------------------\n     This note describes two changes to the IMP-Host communication\nprotocol described in BBN Report 1822 and revised in RFC 381.  The\nfirst deals with the IMP-to-Host interface and the 30-second timeout\nmechanism on each IMP transmission to the Host.  The second deals with\nthe Host-to-IMP interface and proposes a new timeout mechanism.  These\nchanges are independent; in statement and in implementation.  We\ninvite comments on each proposal.  If no adverse comments are\nreceived, they will be installed in the network on Tuesday, October 10\n(if serious adverse comments are received, action will be delayed\nuntil early November).\n\n1)  Declaring an unresponsive Host as dead to the network\n    -----------------------------------------------------\n     Currently, a Host is given 30 seconds to accept each packet of a\nregular message and is also given 30 seconds to accept non- regular\nmessages.  If the Host is unresponsive for this period of time, the\nIMP takes the following actions:\n\n     a)  All messages held for the Host are discarded.\n\n     b)  The source Host for each discarded messages is sent\n         a type 9, subtype 0 message (Incomplete Transmission -\n         Destination Host Tardy).\n\n     c)  The IMP ready line is dropped and raised again.\n\n     d)  The Host is sent 3 type 4 messages (NOP).\n\n     e)  The Host is sent a type 10 message (IMP-Host Interface\n         Reset).\n\n     We propose that in addition the IMP declare the Host dead to the\nnetwork.  Upon receipt of the next bit from the Host, the IMP will\ndeclare the Host alive and begin the 30-second delay while the\ninformation that the Host is now alive is propagated throughout the\nnetwork.\n\n\n\n\n\n\n                                                                [Page 1]\n\f\nRFC #394                                            John M. McQuillan\n\n     This change is an attempt to alleviate some problems that are\ncaused by Hosts whose ready lines are up when they are not able to\naccept bits from the IMP. Several Hosts fall into this category.\nThere are some Hosts whose ready lines are wired to be on all the\ntime.  It is annoying, in terminal use and in running survey programs,\nto have to wait for 30 seconds to find out that a Host is not\nresponding.  Other Hosts sometimes go into \"break- point mode\" for\nsystem debugging for several minutes at a time.  The NCP software is\nnot running, and messages accumulate in the network and are thrown\naway.  It seems preferable to declare such Hosts to be dead until they\nsend a message* to the IMP, and then any source Host attempting to\ncommunicate can be notified at once that the destination Host is dead.\n\n2) Timing out Host-to-IMP messages in 15 seconds\n   ---------------------------------------------\n\n     When the IMP receives a message from a Host, it must acquire\nseveral internal resources in order to process the message.  It must\nassign it a message number, make an entry in an internal table, and so\non.  If any of these IMP resources is not available, the IMP simply\nwaits until it does become available.  It cannot take any more\nmessages from the Host, and so the interface is stopped.  This\ncondition is usually momentary, but under unusual circumstances the\nIMP may not be able to process a message it has begun to accept for\nmany seconds.  This situation creates an especially difficult problem\nfor Hosts with half-duplex interfaces.  If the IMP takes 30 seconds to\nprocess a message, then the IMP-to- Host timeout outlined in 1) takes\neffect, and the Host loses all messages sent to it in the last 30\nseconds.  (It should be noted that the half-duplex interface may be\nthe cause of a deadly embrace, e.g. the reason that the IMP cannot\nacquire the necessary resources to process a given message may be that\nthe Host in question has several messages on its queue and they are\ntying up storage, message\n\n\n\n\n\n__________________\n*Thus a Host should send its IMP at least two NOPs (or other\n messages) whenever it receives a type 10 message from its IMP.\n\n\n\n\n\n\n\n\n                                                                [Page 2]\n\f\nRFC #394                                           John M. Mcquillan\n\nnumbers, or table slots.  The Host must accept these messages before\nany more messages can be introduced into the network.)  Even for Hosts\nwith full-duplex interfaces, occurrences of this situation might\ninterfere with other useful communication.\n\n     We propose to notify the Host when the IMP cannot continue to\nprocess a message that it has begun to accept.  The IMP will try to\nprocess the message for 15 seconds, and then will send the Host a type\n9, subtype 4 message (bits 30,31,32 = 100) which will be defined as\nIncomplete Transmission - Resources Unavailable.  In such a case, the\nIMP has not been able to send any part of the message into the\nnetwork.  The IMP will take in the remainder of the message; at that\npoint a Host with a half-duplex interface should begin to accept\nmessages from the IMP, while a Host with a full-duplex interface might\nattempt to transmit some other message.  The Host may attempt to\nretransmit the incomplete message if that is desirable.\n\n\n\n\n\n\n\n\n\n\n\n\n       [ This RFC was put into machine readable form for entry ]\n       [ into the online RFC archives by BBN Corp. under the   ]\n       [ direction of Alex McKenzie.                      1/97 ]\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                                                [Page 3]\n\f\n"
}