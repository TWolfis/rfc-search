{
  "series": "Request for Comments",
  "number": "190",
  "howpublished": "RFC 190",
  "publisher": "RFC Editor",
  "doi": "10.17487/RFC0190",
  "url": "https://www.rfc-editor.org/info/rfc190",
  "title": "DEC PDP-10-IMLAC communications system",
  "pagetotal": "16",
  "year": "1971",
  "month": "jul",
  "body": "\n\n\n\n\n\nNetwork Working Group                                         P. Deutsch\nRequest for Comments: 190           Xerox Research Center, Palo Alto, CA\nNIC: 7135                                                   13 July 1971\n\n\n                DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM\n\n   This report describes an operational system for communicating textual\n   display information between a main-site computer and a remote-display\n   processor.\n\n      The main site machine is a DEC PDP-10 with the BBN paging hardware\n      (henceforth TENEX).\n\n      The remote machine is a IMLAC PDS-1 (henceforth IMLAC).\n\n      Section (1) briefly describes the IMLAC hardware configurations.\n\n      Section (II) describes the display facilities presented to the\n      user.\n\n      Section (III) describes the system calls (JSYS calls) implemented\n      in the TENEX monitor to provide these facilities.\n\n      Section (IV) describes the formats of the messages used for\n      communication between TENEX and the IMLAC.\n\n      Section (V) analyzes the division of responsibility between the\n      two machines.\n\n(1)  Hardware configurations.\n\n   The standard IMLAC is a 16-bit minicomputer with 4K of 2 microsecond\n   core, a cycle-stealing display, an input keyboard, and an\n   asynchronous serial communication interface.\n\n   The display is normally programmed to draw characters using very\n   short vectors.\n\n      The display comes in two major configurations, depending on the\n      presence or absence of hardware for drawing long vectors.\n\n      In the sequel, specifications depending on the configuration will\n      be flagged LVH or non-LVH respectively.\n\n   The I/O system normally does not provide for interrupts when\n   characters arrive from the serial interface.\n\n\n\n\nDeutsch                                                         [Page 1]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n      However, the IMLAC is barely able to keep up with the PDP-10\n      without this feature, so we were able to persuade the manufacturer\n      to implement it.\n\n   While no special hardware is required for the software described\n   here, the character interrupt and the SRI-ARC \"mouse\" and \"keyset\"\n   are highly recommended, and the software is oriented towards their\n   use.\n\n(II)  Facilities.\n\n   Each display console in the system may be in \"display mode\" or\n   \"teletype simulation mode\".\n\n      In display mode, the information displayed consists of text\n      strings at arbitrary positions on the display face.\n\n      In teletype simulation mode, the display shows the last 20-30\n      lines which would appear on a teletype listing.\n\n      A given console may switch between these modes, under program\n      control, without losing any information.\n\n   Regardless of mode, each display has a cursor string which follows\n   the position of the available pointing device,\n\n      The implemented system uses a \"mouse\" generally, but one console\n      uses a tablet.\n\n      The cursor string may be set by a program, for example to indicate\n      at what sort of object the user is expected to point.\n\n   In display mode, the screen of a given console is allocated to users\n   in rectangular blocks called \"display areas\".\n\n      This allows users to communicate via a single display split into\n      multiple areas.\n\n   When a user (program) requests a display area, he specifies how many\n   text strings he will want to display in it.\n\n      Each string has its own X-Y location, character size, font\n      (italic, underline, ...), and an arbitrary number of characters.\n\n         Each of these components is settable without disturbing the\n         others.\n\n      Each string may be manipulated without affecting the others.\n\n\n\nDeutsch                                                         [Page 2]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n(III) JSYS calls.\n\n   (ADA) Assign a display area.\n\n      JSYS ada: [440B]     allocate a display area\n\n         Accepts:\n\n         r1:\n\n            upper-left-y-cord[10], upper-left-x-cord[10], max-no-\n            string[11]\n\n         r2:\n\n            lower-right-y-cord[10], lower-right-x-cord[10], default-c-\n            size[2], default-n-inc[6], default-font[5]\n\n         Returns:\n\n            +1: Unsuccessful\n\n               r1: error code\n\n            +2: Successful\n\n               r1: da-id[18]\n\n         Function:\n\n            This jsys allocates a display area given the coordinates of\n            the diagonal, the maximum number of strings to be displayed,\n            and the default setting for the character size, font, and\n            horizontal increment.  An 18-bit da-id is returned which\n            should subsequently be used to refer to this display area.\n\n   (DDA) Deallocate a display area.\n\n      JSYS dda; [441B]     deallocate a display area\n\n         Accepts:\n\n            r1: da-id\n\n\n\n\n\n\n\n\nDeutsch                                                         [Page 3]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n         Returns:\n\n            +1: Unsuccessful\n\n               r1: error code\n\n            +2: Successful\n\n         Function:\n\n            This jsys deallocates a display area given the associated\n            da-id.\n\n   (STRDA)  STRing display:  add, delete, or change.\n\n   JSYS strda; [442B]     Manipulate (move, write, replace, delete) a\n   string in a display area\n\n      Accepts:\n\n         r1: string-id[18], da-id[18]\n\n         r2: first byte pointer or 0 or -1\n\n         r2: second byte pointer or 0\n\n         r4: y-cord[10], x-cord[10], font[6], c-size[3], h-inc[7]\n\n      Returns:\n\n         +1:  Unsuccessful\n\n               r1: error code\n\n         +2:  Successful\n\n               r1: string-id[18]\n\n      Function:\n\n         This jsys writes a new string, replaces, deletes, or moves\n         (optionally replacing) an extant string within a display area.\n         In addition, the font, character size, and horizontal increment\n         may be specified for the string.\n\n            The string may be specified by two byte pointers or by one\n            byte pointer with the string terminating with a zero\n            character.\n\n\n\nDeutsch                                                         [Page 4]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n               If first byte pointer is zero then\n\n                  if a new string is being written then\n\n                     an error code illstr is returned.\n\n                  Otherwise, the string already exists so\n\n                     delete the string from the display area.\n\n               If the first byte pointer is -1 then\n\n                  if a new string is being written then\n\n                     an error code illstr is returned.\n\n                  Otherwise, use the old string.\n\n               If the first character of the string is a zero character,\n               the string to be displayed is null, but the string is not\n               deleted.\n\n            The coordinates (optional unless the string is new or being\n            moved) are relative to the upper leftcorner of the display\n            area.\n\n               If the jsys is to effect an extant string, a zero\n               coordinate means use the old value.\n\n            For the font, c-size, and h-inc fields a field of all one's\n            indicates that the display area default value (set in the\n            ada jsys) is to be used.  A 0 means use the value which was\n            previously used for the (extant) string.\n\n            If the string is new, then an 18 bit string identifier is\n            returned.\n\n   (SCSR)  Set the Cursor StRing.\n\n      JSYS scsr; [450B]     display a string (vectors later) as the\n      cursor\n\n         Accepts:\n\n            r1:  first byte pointer or 0 or -1\n\n            r2:  second byte pointer or 0\n\n\n\n\nDeutsch                                                         [Page 5]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n            r3: font[5], c-size[2], h-inc[6]\n\n               No defaults allowed\n\n         Returns:\n\n            +1:  Unsuccessful\n\n               r1:  error code\n\n            +2:  Successful\n\n         Function:\n\n            This jsys is used to set the cursor string.  Later, a set of\n            vectors will be allowed also.  If the string length is zero\n            or the first byte pointer is 0, nothing will be displayed\n            for the cursor.  If the first byte pointer is -1 then the\n            old string will be used.  If a cursor did not previously\n            exist, an illcon error return will be executed.\n\n   (SDDA)  Suppress the display of an area.\n\n      JSYS sdda; [444B]    suppress all display in a display area\n\n         Accepts:\n\n            r1: da-id[18]\n\n            r2:  1 or 0\n\n         Returns:\n\n            +1:  Unsuccessful\n\n               r1:  error code\n\n            +2:  Successful\n\n         Function:\n\n            The display image is removed from the display area but is\n            not destroyed if r2 = 0.\n\n   (RDDA)  Restore the display of an area.\n\n      JSYS rdda; [446B]    restore all display in a display area\n\n\n\n\nDeutsch                                                         [Page 6]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n         Accepts:\n\n            r1: da-id[18]\n\n         Returns:\n\n            +1:  Unsuccessful\n\n               r1:  error code\n\n  +2:  Successful\n\n         Function:\n\n            The display image is restored in the display area.\n\n   (SDDA)  Suppress the display of a String.\n\n      JSYS ssda [445B];    suppress display of a string in a display\n      area\n\n         Accepts:\n\n            r1: string-id[18], da-id[18]\n\n         Returns:\n\n            +1:  Unsuccessful\n\n               r1:  error code\n\n            +2:  Successful\n\n         Function:\n\n            The display image for the given string is suppressed in the\n            display area\n\n   (RDSA)  Restore the display of a String.\n\n      JSYS rsda; [447B]    restore display of a string in a display area\n\n         Accepts:\n\n            r1: string-id[18], da-id[18]\n\n\n\n\n\n\nDeutsch                                                         [Page 7]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n         Returns:\n\n            +1:  Unsuccessful\n\n               r1:  error code\n\n            +2:  Successful\n\n         Function:\n\n            The display image for the given string is restored in the\n            display area.\n\n   (TSNDA)  Teletype Simulation oN.\n\n      JSYS tsnda; [451B]     turn tty simlaution on\n\n         Accepts:\n\n            none\n\n         Returns:\n\n            +1:  Always\n\n               r1:  1 if was in work station mode, 0 otherwise\n\n         Function:\n\n            Restores the tty simulation display area, and suppresses all\n            others (except the cursor).  Turns wsmode (work station mode\n            flag) off for this console and returns previous value of\n            wsmode.\n\n   (TSFDA)  Teletype Simulation ofF.\n\n      JSYS tsfda;  [452B]     turn tty simulation off\n\n         Accepts:\n\n            none\n\n         Returns:\n\n            +1:  Always\n\n\n\n\n\n\nDeutsch                                                         [Page 8]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n         Function:\n\n            Suppresses the display of the tty simulation display area,\n            restores the display of all other display areas, and sets\n            wsmode on.\n\n   (RSTDA)    Reset display areas.\n\n      JSYS rstda; [453B]     Reset display areas\n\n         Accepts:\n\n            none\n\n         Returns:\n\n            +1:  Always\n\n         Functions:\n\n            Deallocates and removes images from all display areas\n            associated with this console except the tty simulation and\n            cursor, the display of which is restored.\n\n(IV)  Message formats.\n\n   Messages are sequences of 8-bit characters, of which 7 contain useful\n   information.\n\n      The higer-order (200B) bit should contain even parity on IMLAC\n      input and is set to even parity on IMLAC output.\n\n      If the IMLAC receives an odd parity character, it halts at\n      present.\n\n      In the remainder of this document, the parity bit will not be\n      discussed.\n\n   A message may be either a character or a command.\n\n   Single-character messages from the PDP-10 to the IMLAC represent\n   program output intended for the teletype.\n\n   Commands from the PDP-10 represent display information.\n\n   Commands from the IMLAC represent characters or other input\n   information.\n\n\n\n\nDeutsch                                                         [Page 9]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n   Every command is prefixed by an internal escape character (code 33B)\n   and a character count.\n\n      The escape character will henceforth be referred to as ESC: is has\n      the same code as the ASCII escape character 33B.\n\n   Messages sent from TENEX to IMLAC:\n\n      Characters 40B-177B are directed to the teletype simulation area.\n\n      Character 12B (line feed) starts a new line in the teletype\n      simulation area.\n\n      An ESC indicates that display or control information is coming, as\n      follows.\n\n         Every message beginning with ESC contains the number of\n         following characters as its second character.\n\n         Certain constructs appear in several command messages.\n\n            (da)  A display area identifier is a pair of characters\n            containing 12 bits of information:\n\n               1st: bits (0:5) + 40B\n\n               2nd: bits (6:11) + 40B\n\n            (NSTRS)  A string count is a single character between 0 and\n            177B.\n\n            (STRID)  A string identifier is a single character between 1\n            and 177B.\n\n            (RETAIN)  The retention flag, if non-zero, specifies that an\n            existing string should be retained rather than overwritten.\n\n            (CSIZE)  A character size is a single character between 0\n            and 3:\n\n               The character sizes are respectively x1/2, x1, x2, x3.\n\n            (HINC)  A horizontal increment is a single character.\n\n               In the present implementation, HINC is ignored and a\n               standard spacing is supplied as follows.\n\n\n\n\n\nDeutsch                                                        [Page 10]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n                  LVH:\n\n                     0: 3 units\n\n                     1: 6 units\n\n                     2: 12 units\n\n                     3: 18 units\n\n                  non-LVH:\n\n                     0: 4.5 units\n\n                     1: 9 units\n\n                     2: 18 units\n\n                     3: 27 units\n\n            (FONTS)  A font specification is a single character.\n\n               In the present implementation, the font is stored but\n               does not affect the display.\n\n            (outxy)  An output X-Y coordinate pair is encoded in four\n            characters as follows:\n\n               1st: X,bits(0:5) + 40B\n\n               2nd: X,bits(6:11) + 40B\n\n               3rd: Y,bits(0:5) + 40B\n\n               4th: Y,bits(6:11) + 40B\n\n            (inxy)  An input X-Y coordinate pair is encoded in four\n            characters as follows:\n\n            LVH:  see (outxy) above.\n\n            non-LVH:  as above, except that each 12-bit coordinate is\n            actually of the form 1400B+40B*[v/9]+(v MOD 9), where the\n            actual coordinate is 0\u003c=v\u003c=719.\n\n                  This means there are actually fewer points on each\n                  axis.\n\n\n\n\nDeutsch                                                        [Page 11]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n            (string)  A string is just the requisite number of\n            characters.\n\n               Control characters will be displayed as a distinctive\n               blot.\n\n         Each display operation has a corresponding message.\n\n            01B - ADA (assign display area)\n\n               Followed by (da) NSTRS CSIZE HINC FONT.\n\n            02B - DDA (delete display area)\n\n               Followed by (da).\n\n            04B - STRDA (string display)\n\n               Followed by (da) STRID RETAIN (xy) FORMAT [CSIZE] [HINC]\n               [FONT] (string).\n\n                  Format specifies whether each of CSIZE, HINC, and FONT\n                  is to come from the display area default, the current\n                  value for the string, or the message.\n\n                     The bits are: 0 0 STF STI STC RDF RDI RDC.\n\n                     RDF=1 means read the FONT from the message.\n\n                     RDF=0, STF=1 means use the old value from the\n                     string.\n\n                     RDF=0, STF=0 means use the display area default.\n\n                     The pairs RDI-STI and RDC-STC specify HINC and\n                     CSIZE in the same way.\n\n            05B - SCSR (set cursor string)\n\n               Followed by RETAIN CSIZE HINC FONT (string).\n\n            06B - SDDA (suppress display of da)\n\n               Followed by (da) KILL.\n\n                  KILL#0 means delete all strings in this display area.\n\n                  KILL=0 means retain the strings.\n\n\n\nDeutsch                                                        [Page 12]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n            07B - RDDA (restore display of da)\n\n               Followed by (da).\n\n            10B - SDDA (suppress display of string)\n\n               Followed by (da) STRID KILL.\n\n                  KILL#0 means delete the string.\n\n                  KILL=0 means retain the string.\n\n            11B - RSLA (restore display of string)\n\n               Followed by (da) STRID.\n\n            12B - TSNDA (turn teletype simulation on)\n\n            13B - TSFDA (turn teletype simulation off)\n\n            14B - Long input mode\n\n               Puts the IMLAC into the mode where it sends coordinate\n               information in a message with every character.\n\n                  This is the normal operating mode for the IMLAC.\n\n            15B - Short input mode\n\n               Puts the IMLAC into the mode where it outputs characters\n               literally, just like a teletype.\n\n                  The IMLAC starts out in this mode when turned on.\n\n         A string of 10 ESC characters, followed by a non-ESC, indicates\n         an emergency - the IMLAC reinitializes itself and goes into\n         short input and teletype simulation modes.\n\n      All other (control) characters are ignored.\n\n   Messages sent from IMLAC to TENEX:\n\n      Short input mode:\n\n         Every character typed on the keyboard is transmitted literally.\n\n\n\n\n\n\nDeutsch                                                        [Page 13]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n      Long input mode:\n\n         Every message begins with ESC and a count of subsequent\n         characters.\n\n            Codes 40B-177B represent keyboard input.\n\n               Note that the IMLAC does not echo these characters on the\n               display.\n\n            Codes 00B-37B, except ESC, represent typed-in control\n            characters.\n\n               The present implementation allows the user to generate\n               all of these codes from the keyboard.\n\n            ESC may be followed by a keyset-mouse code or a control\n            character.\n\n               Code 00B represents an ESC typed on the keyboard.\n\n               Otherwise, a code 40B-77B and a code 100B-107B follow.\n\n                  This type of message is sent whenever the mouse\n                  buttons change or a character has been typed on the\n                  keyset, and the IMLAC cannot convert this to an\n                  ordinary character.\n\n                     The IMLAC converts recognizable keyset chords and\n                     mouse changes to characters; see SRI-ARC\n                     documentation for a full discussion of this\n                     hardware.\n\n                  The codes 40B-77B represent accumulated keyset chords.\n\n                     40B means no complete chord has been struck.\n\n                  The codes 100B-107B represent the state of the mouse\n                  buttons after a change:  a 1-bit corresponds to a\n                  depressed button.\n\n               Other codes should not appear.\n\n            All codes are followed by the (inxy) coordinates of the\n            mouse.\n\n               This means 7 or 8 characters are sent for each character\n               typed.\n\n\n\nDeutsch                                                        [Page 14]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n(V)  Division of responsibility\n\n   The first criterion in design of the system just described was to\n   allocate sufficient validity checking to the PDP-10 to make it\n   unnecessary for the IMLAC to send a response for each command.\n\n      Thus, the PDP-10 allocates and checks display area identifiers and\n      string numbers.\n\n      In the present implementation, display areas are numbered system-\n      wide whereas strings are numbered from 1 to N within a display\n      area.\n\n   The only errors not detectable by the PDP-10 are transmission parity\n   errors and overflow of the IMLAC's memory.\n\n      The former are presently not corrected, but could be handled by\n      any standard technique.\n\n      The latter are in principle detectable by the PDP-10, since the\n      amount of space required to store a given display is fairly simply\n      computable.\n\n         If the IMLAC runs out of space, it deletes lines from the top\n         of the teletype simulation display, until only three are left,\n         before giving up.\n\n   A secondary criterion was to hold down the number of characters\n   required to represent a display command.\n\n   We have found two problem areas and two areas in which we expect to\n   expand the IMLAC's capability.\n\n      Echoing was relegated to TENEX since we desired to avoid the\n      well-known complications associated with remote echoing.\n\n      The question of identifying a device as an IMLAC to TENEX gave us\n      a great deal of trouble.\n\n         We settled on the convention of a TENEX Executive command which\n         causes TENEX to send the \"Long input mode\" message.\n\n            The IMLAC starts out in short input mode.\n\n         The TENEX character input routines also may be set into either\n         long or short mode.\n\n            Their state is changed by the TSNDA and TSFDA system calls.\n\n\n\nDeutsch                                                        [Page 15]\n\f\nRFC 190         DEC PDP-10 -- IMLAC COMMUNICATION SYSTEM    13 July 1971\n\n\n            In short mode, (TSNDA last), short input is passed\n            literally, and only the character is passed from long input.\n\n            In long mode (TSFDA last), short input is padded with all-\n            zero coordinates, and long input is passed literally.\n\n            This arrangement allows TENEX programs which do not use the\n            special features of the IMLAC to operate correctly with\n            either an IMLAC or a teletype.\n\n            The user may restore the IMLAC to short mode with another\n            command or with a special key on the IMLAC keyboard.\n\n         Code is ready to allow the IMLAC to collect entire literal\n         strings with some internal editing before sending them to\n         TENEX.\n\n            We have not resolved the disposition of characters typed by\n            the user between the typed command initiating literal input\n            and the receipt by the IMLAC of the \"collect literal\"\n            message.\n\n         With 8K of core, the IMLAC can handle a significant fraction of\n         the command parsing and feedback functions of the SRI-ARC On-\n         Line System (NLS), for which this effort is principally\n         intended.\n\n\n             [This RFC was put into machine readable form for entry]\n             [into the online RFC archives by Lorrie Shiota, 10/01]\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDeutsch                                                        [Page 16]\n\f\n"
}